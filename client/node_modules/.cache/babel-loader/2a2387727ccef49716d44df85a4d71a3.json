{"ast":null,"code":"import _toConsumableArray from\"/var/www/3.91.176.125/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/var/www/3.91.176.125/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/var/www/3.91.176.125/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"/var/www/3.91.176.125/client/node_modules/@babel/runtime/regenerator/index.js\";import{useEffect,useState}from'react';import axios from\"axios\";import{format}from\"date-fns\";import'./App.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var baseUrl=\"http://3.91.176.125\";function App(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),description=_useState2[0],setDescription=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),editDescription=_useState4[0],setEditDescription=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),eventsList=_useState6[0],setEventsList=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),eventId=_useState8[0],setEventId=_useState8[1];var fetchEvents=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,events;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"\".concat(baseUrl,\"/api/events\"));case 2:data=_context.sent;events=data.data.events;setEventsList(events);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchEvents(){return _ref.apply(this,arguments);};}();var handleChange=function handleChange(e,field){if(field===\"edit\"){setEditDescription(e.target.value);}else{setDescription(e.target.value);}};var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){var updatedList;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"\".concat(baseUrl,\"/api/events/\").concat(id));case 3:updatedList=eventsList.filter(function(event){return event.id!==id;});setEventsList(updatedList);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);console.error(_context2.t0.message);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function handleDelete(_x){return _ref2.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var data,updatedEvent,updatedList,_data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();_context3.prev=1;if(!editDescription){_context3.next=11;break;}_context3.next=5;return axios.put(\"\".concat(baseUrl,\"/api/events/\").concat(eventId),{description:editDescription});case 5:data=_context3.sent;updatedEvent=data.data.event;updatedList=eventsList.map(function(event){if(event.id===eventId){return event=updatedEvent;}return event;});setEventsList(updatedList);_context3.next=15;break;case 11:_context3.next=13;return axios.post(\"\".concat(baseUrl,\"/api/event\"),{description:description});case 13:_data=_context3.sent;setEventsList([].concat(_toConsumableArray(eventsList),[_data.data]));case 15:setDescription(\"\");setEditDescription(\"\");setEventId(null);_context3.next=23;break;case 20:_context3.prev=20;_context3.t0=_context3[\"catch\"](1);console.error(_context3.t0.message);case 23:case\"end\":return _context3.stop();}}},_callee3,null,[[1,20]]);}));return function handleSubmit(_x2){return _ref3.apply(this,arguments);};}();var handleEdit=function handleEdit(event){setEventId(event.id);setEditDescription(event.description);};useEffect(function(){fetchEvents();},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"Description\"}),/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return handleChange(e,\"description\");},type:\"text\",name:\"description\",id:\"description\",placeholder:\"Describe the Event\",value:description}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]})}),/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsx(\"ul\",{children:eventsList.map(function(event){if(eventId===event.id){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return handleChange(e,\"edit\");},type:\"text\",name:\"editDescription\",id:\"editDescription\",value:editDescription}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]},event.id);}else{return/*#__PURE__*/_jsxs(\"li\",{children:[format(new Date(event.created_at),\"yyyy/mm/dd HH:MM\"),\": \",\" \",event.description,/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleEdit(event);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return handleDelete(event.id);},children:\"X\"})]},event.id);}})})})]});}export default App;","map":{"version":3,"sources":["/var/www/3.91.176.125/client/src/App.js"],"names":["useEffect","useState","axios","format","baseUrl","App","description","setDescription","editDescription","setEditDescription","eventsList","setEventsList","eventId","setEventId","fetchEvents","get","data","events","handleChange","e","field","target","value","handleDelete","id","delete","updatedList","filter","event","console","error","message","handleSubmit","preventDefault","put","updatedEvent","map","post","handleEdit","Date","created_at"],"mappings":"mdAAA,OAAQA,SAAR,CAAmBC,QAAnB,KAAkC,OAAlC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,MAAR,KAAqB,UAArB,CAEA,MAAO,WAAP,C,wFAEA,GAAMC,CAAAA,OAAO,CAAG,qBAAhB,CAEA,QAASC,CAAAA,GAAT,EAAe,CACb,cAAsCJ,QAAQ,CAAC,EAAD,CAA9C,wCAAOK,WAAP,eAAoBC,cAApB,eACA,eAA8CN,QAAQ,CAAC,EAAD,CAAtD,yCAAOO,eAAP,eAAwBC,kBAAxB,eACA,eAAoCR,QAAQ,CAAC,EAAD,CAA5C,yCAAOS,UAAP,eAAmBC,aAAnB,eACA,eAA8BV,QAAQ,CAAC,IAAD,CAAtC,yCAAOW,OAAP,eAAgBC,UAAhB,eAEA,GAAMC,CAAAA,WAAW,0FAAG,yKACCZ,CAAAA,KAAK,CAACa,GAAN,WAAaX,OAAb,gBADD,QACZY,IADY,eAEXC,MAFW,CAEDD,IAAI,CAACA,IAFJ,CAEXC,MAFW,CAGlBN,aAAa,CAACM,MAAD,CAAb,CAHkB,sDAAH,kBAAXH,CAAAA,WAAW,0CAAjB,CAMA,GAAMI,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAIC,KAAJ,CAAc,CACjC,GAAIA,KAAK,GAAK,MAAd,CAAsB,CACpBX,kBAAkB,CAACU,CAAC,CAACE,MAAF,CAASC,KAAV,CAAlB,CACD,CAFD,IAEO,CACLf,cAAc,CAACY,CAAC,CAACE,MAAF,CAASC,KAAV,CAAd,CACD,CACF,CAND,CAQA,GAAMC,CAAAA,YAAY,2FAAG,kBAAOC,EAAP,8KAEXtB,CAAAA,KAAK,CAACuB,MAAN,WAAgBrB,OAAhB,wBAAsCoB,EAAtC,EAFW,QAGXE,WAHW,CAGGhB,UAAU,CAACiB,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACJ,EAAN,GAAaA,EAAjB,EAAvB,CAHH,CAIjBb,aAAa,CAACe,WAAD,CAAb,CAJiB,mFAMjBG,OAAO,CAACC,KAAR,CAAc,aAAIC,OAAlB,EANiB,sEAAH,kBAAZR,CAAAA,YAAY,6CAAlB,CAUA,GAAMS,CAAAA,YAAY,2FAAG,kBAAOb,CAAP,8JACnBA,CAAC,CAACc,cAAF,GADmB,qBAGbzB,eAHa,kDAIIN,CAAAA,KAAK,CAACgC,GAAN,WAAa9B,OAAb,wBAAmCQ,OAAnC,EAA8C,CAACN,WAAW,CAAEE,eAAd,CAA9C,CAJJ,QAITQ,IAJS,gBAKTmB,YALS,CAKMnB,IAAI,CAACA,IAAL,CAAUY,KALhB,CAMTF,WANS,CAMKhB,UAAU,CAAC0B,GAAX,CAAe,SAAAR,KAAK,CAAI,CAC1C,GAAIA,KAAK,CAACJ,EAAN,GAAaZ,OAAjB,CAA0B,CACxB,MAAOgB,CAAAA,KAAK,CAAGO,YAAf,CACD,CACD,MAAOP,CAAAA,KAAP,CACD,CALmB,CANL,CAYfjB,aAAa,CAACe,WAAD,CAAb,CAZe,wDAcIxB,CAAAA,KAAK,CAACmC,IAAN,WAAcjC,OAAd,eAAmC,CAACE,WAAW,CAAXA,WAAD,CAAnC,CAdJ,SAcTU,KAdS,gBAefL,aAAa,8BAAKD,UAAL,GAAiBM,KAAI,CAACA,IAAtB,GAAb,CAfe,QAiBjBT,cAAc,CAAC,EAAD,CAAd,CACAE,kBAAkB,CAAC,EAAD,CAAlB,CACAI,UAAU,CAAC,IAAD,CAAV,CAnBiB,qFAqBjBgB,OAAO,CAACC,KAAR,CAAc,aAAIC,OAAlB,EArBiB,uEAAH,kBAAZC,CAAAA,YAAY,8CAAlB,CAyBA,GAAMM,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACV,KAAD,CAAW,CAC5Bf,UAAU,CAACe,KAAK,CAACJ,EAAP,CAAV,CACAf,kBAAkB,CAACmB,KAAK,CAACtB,WAAP,CAAlB,CAED,CAJD,CAMAN,SAAS,CAAC,UAAM,CACdc,WAAW,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,mBACE,aAAK,SAAS,CAAG,KAAjB,wBACE,sCACE,cAAM,QAAQ,CAAIkB,YAAlB,wBACE,cAAO,OAAO,CAAG,aAAjB,yBADF,cAEE,cACE,QAAQ,CAAI,kBAACb,CAAD,QAAOD,CAAAA,YAAY,CAACC,CAAD,CAAI,aAAJ,CAAnB,EADd,CAEE,IAAI,CAAG,MAFT,CAGE,IAAI,CAAG,aAHT,CAIE,EAAE,CAAG,aAJP,CAKE,WAAW,CAAG,oBALhB,CAME,KAAK,CAAIb,WANX,EAFF,cAUE,eAAQ,IAAI,CAAG,QAAf,oBAVF,GADF,EADF,cAeE,sCACE,oBACGI,UAAU,CAAC0B,GAAX,CAAe,SAAAR,KAAK,CAAI,CACvB,GAAIhB,OAAO,GAAKgB,KAAK,CAACJ,EAAtB,CAA0B,CACxB,mBACE,cAAM,QAAQ,CAAIQ,YAAlB,wBACE,cACE,QAAQ,CAAI,kBAACb,CAAD,QAAOD,CAAAA,YAAY,CAACC,CAAD,CAAI,MAAJ,CAAnB,EADd,CAEE,IAAI,CAAG,MAFT,CAGE,IAAI,CAAG,iBAHT,CAIE,EAAE,CAAG,iBAJP,CAKE,KAAK,CAAIX,eALX,EADF,cAQE,eAAQ,IAAI,CAAG,QAAf,oBARF,GAAuCoB,KAAK,CAACJ,EAA7C,CADF,CAYD,CAbD,IAaO,CACL,mBACE,sBACGrB,MAAM,CAAC,GAAIoC,CAAAA,IAAJ,CAASX,KAAK,CAACY,UAAf,CAAD,CAA6B,kBAA7B,CADT,MAC6D,GAD7D,CAEGZ,KAAK,CAACtB,WAFT,cAGE,eAAQ,OAAO,CAAI,yBAAMgC,CAAAA,UAAU,CAACV,KAAD,CAAhB,EAAnB,kBAHF,cAIE,eAAQ,OAAO,CAAI,yBAAML,CAAAA,YAAY,CAACK,KAAK,CAACJ,EAAP,CAAlB,EAAnB,eAJF,GAAWI,KAAK,CAACJ,EAAjB,CADF,CAQD,CACF,CAxBA,CADH,EADF,EAfF,GADF,CA+CD,CAED,cAAenB,CAAAA,GAAf","sourcesContent":["import {useEffect, useState} from 'react';\nimport axios from \"axios\"\nimport {format} from \"date-fns\";\n\nimport './App.css';\n\nconst baseUrl = \"http://3.91.176.125\"\n\nfunction App() {\n  const [description, setDescription] = useState(\"\");\n  const [editDescription, setEditDescription] = useState(\"\");\n  const [eventsList, setEventsList] = useState([]);\n  const [eventId, setEventId] = useState(null);\n\n  const fetchEvents = async () => {\n    const data = await axios.get(`${baseUrl}/api/events`);\n    const {events} = data.data;\n    setEventsList(events);\n  }\n\n  const handleChange = (e, field) => {\n    if (field === \"edit\") {\n      setEditDescription(e.target.value);\n    } else {\n      setDescription(e.target.value);\n    }\n  }\n\n  const handleDelete = async (id) => {\n    try {\n      await axios.delete(`${baseUrl}/api/events/${id}`);\n      const updatedList = eventsList.filter(event => event.id !== id);\n      setEventsList(updatedList);\n    } catch (err) {\n      console.error(err.message);\n    }\n  }\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      if (editDescription) {\n        const data = await axios.put(`${baseUrl}/api/events/${eventId}`, {description: editDescription});\n        const updatedEvent = data.data.event;\n        const updatedList = eventsList.map(event => {\n          if (event.id === eventId) {\n            return event = updatedEvent\n          }\n          return event\n        })\n        setEventsList(updatedList);\n      } else {\n        const data = await axios.post(`${baseUrl}/api/event`, {description});\n        setEventsList([...eventsList, data.data]);\n      }\n      setDescription(\"\");\n      setEditDescription(\"\");\n      setEventId(null);\n    } catch (err) {\n      console.error(err.message);\n    }\n  }\n\n  const handleEdit = (event) => {\n    setEventId(event.id);\n    setEditDescription(event.description);\n\n  }\n\n  useEffect(() => {\n    fetchEvents();\n  }, [])\n\n  return (\n    <div className = \"App\">\n      <section>\n        <form onSubmit = {handleSubmit}>\n          <label htmlFor = \"description\">Description</label>\n          <input \n            onChange = {(e) => handleChange(e, \"description\")}\n            type = \"text\"\n            name = \"description\"\n            id = \"description\"\n            placeholder = \"Describe the Event\"\n            value = {description}\n          />\n          <button type = \"submit\">Submit</button>\n        </form>\n      </section>\n      <section>\n        <ul>\n          {eventsList.map(event => {\n            if (eventId === event.id) {\n              return (\n                <form onSubmit = {handleSubmit} key = {event.id}>\n                  <input\n                    onChange = {(e) => handleChange(e, \"edit\")}\n                    type = \"text\"\n                    name = \"editDescription\"\n                    id = \"editDescription\"\n                    value = {editDescription}\n                  />\n                  <button type = \"submit\">Submit</button>\n                </form>\n              )\n            } else {\n              return (\n                <li key = {event.id}>\n                  {format(new Date(event.created_at), \"yyyy/mm/dd HH:MM\")}: {\" \"}\n                  {event.description}\n                  <button onClick = {() => handleEdit(event)}>Edit</button>\n                  <button onClick = {() => handleDelete(event.id)}>X</button>\n                </li>\n              )\n            }\n          })}\n        </ul>\n      </section>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}